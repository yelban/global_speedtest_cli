# interactive_vultr_test.py 說明文件

## 概述

`interactive_vultr_test.py` 是一個互動式的 Vultr 全球機房網路速度測試工具，提供友好的選單介面，讓使用者能夠輕鬆選擇要測試的機房並執行下載速度測試。

## 功能特色

- **互動式選單介面**：直觀的文字選單，無需記憶複雜命令
- **多種測試模式**：快速測試、地區測試、特定機房測試等
- **完整的測試覆蓋**：支援 Vultr 全球機房和台灣 HiNet 測速
- **彈性測試設定**：可選擇檔案大小、下載模式、測試間隔
- **即時進度顯示**：測試過程中顯示下載進度和即時速度
- **結果儲存功能**：支援將測試結果匯出為 JSON 格式
- **測試統計摘要**：自動計算平均速度和最佳機房

## 測試選項

### 主選單選項

1. **快速測試 (推薦機房)**：測試預設的 6 個推薦機房
2. **台灣 HiNet 測速**：使用台灣 HiNet 官方測速檔案
3. **選擇地區測試**：按地理區域選擇機房
4. **選擇特定機房**：從所有機房中選擇特定機房
5. **完整測試 (所有機房)**：測試所有可用機房
6. **自訂測試組合**：輸入機房代碼自訂測試組合

### 測試設定

#### 檔案大小選項
- **100MB**：適合快速測試，耗費流量較少
- **1GB**：適合精確測試，需要較多時間和流量

#### 下載模式
- **完整下載**：下載完整檔案，測試結果更準確
- **快速測試**：部分下載，測試時間較短但可能影響準確性

#### 其他設定
- **測試間隔**：設定各機房測試之間的等待時間（預設 2.0 秒）

## 支援的測試站點

### Vultr 全球機房

#### 亞洲 (Asia)
- 日本-東京
- 日本-大阪
- 韓國-首爾
- 新加坡
- 印度-班加羅爾
- 印度-德里NCR
- 印度-孟買
- 以色列-特拉維夫

#### 歐洲 (Europe)
- 英國-倫敦
- 英國-曼徹斯特
- 德國-法蘭克福
- 法國-巴黎
- 荷蘭-阿姆斯特丹
- 波蘭-華沙
- 瑞典-斯德哥爾摩
- 西班牙-馬德里

#### 北美 (North America)
- 美國-亞特蘭大
- 美國-芝加哥
- 美國-達拉斯
- 美國-火奴魯魯
- 美國-洛杉磯
- 美國-邁阿密
- 美國-紐約
- 美國-西雅圖
- 美國-硅谷
- 加拿大-多倫多
- 墨西哥-墨西哥城

#### 南美 (South America)
- 巴西-聖保羅
- 智利-聖地牙哥

#### 非洲 (Africa)
- 南非-約翰內斯堡

#### 大洋洲 (Oceania)
- 澳大利亞-墨爾本
- 澳大利亞-雪梨

### 台灣 HiNet
- **HiNet 250MB**：使用 250MB 測試檔案
- **HiNet 2GB**：使用 2GB 測試檔案

## 使用方法

### 啟動程式

```bash
python3 interactive_vultr_test.py
```

### 操作流程

1. **啟動程式**：執行命令後會顯示主選單
2. **選擇測試模式**：輸入數字選擇測試類型
3. **配置測試設定**：選擇檔案大小、下載模式等
4. **執行測試**：程式會自動執行測試並顯示進度
5. **查看結果**：測試完成後顯示詳細結果和統計
6. **儲存結果**（可選）：選擇是否將結果儲存為 JSON 檔案

### 互動示例

```
============================================================
          🌐 全球網路速度測試工具
============================================================
1. 快速測試 (推薦機房)
2. 台灣 HiNet 測速
3. 選擇地區測試
4. 選擇特定機房
5. 完整測試 (所有機房)
6. 自訂測試組合
0. 退出
------------------------------------------------------------
請選擇 (0-6): 1

測試設定:
1. 100MB
2. 1GB
選擇測試檔案大小 (0-2): 1

下載模式:
1. 完整下載 (預設，更準確)
2. 快速測試 (部分下載，較快)
選擇下載模式 (0-2): 1

測試間隔秒數 (預設 2.0): 2

執行快速測試 (推薦機房)...

測試 6 個機房...
[INFO] 測試 台灣-HiNet (250MB) (http.speed.hinet.net)...
    正在測試延遲...
    正在測試下載速度...
    檔案大小: 250.0 MB
    [████████████████████] 100.0% | 250.0MB | 67.8 Mbps
台灣-HiNet (250MB): ↓ 67.8 Mbps | ping 12.3 ms
```

## 主要類別和方法

### InteractiveVultrTest 類別

#### 主要方法
- `run()`: 主執行迴圈
- `print_main_menu()`: 顯示主選單
- `quick_test()`: 執行快速測試
- `hinet_test()`: 執行 HiNet 測速
- `region_test()`: 地區測試選單
- `specific_server_test()`: 特定機房測試
- `full_test()`: 完整測試所有機房
- `custom_test()`: 自訂測試組合

#### 輔助方法
- `get_user_input()`: 安全的使用者輸入處理
- `get_test_settings()`: 獲取測試設定
- `run_tests()`: 執行實際測試
- `clear_screen()`: 清除螢幕顯示

## 測試結果格式

### 即時顯示
測試過程中會顯示：
- 當前測試的機房名稱和主機
- 延遲測試進度
- 下載速度測試進度條
- 即時下載速度（Mbps）

### 測試摘要
完成後顯示：
- 成功測試的機房數量
- 平均下載速度
- 最快的機房及其速度

### JSON 輸出格式
```json
[
  {
    "server_key": "tokyo",
    "server_name": "日本-東京",
    "server_host": "hnd-jp-ping.vultr.com",
    "server_ip": "108.61.201.151",
    "region": "asia",
    "ping_ms": 35.2,
    "download_mbps": 89.5,
    "downloaded_bytes": 104857600,
    "test_duration": 9.3,
    "timestamp": "2024-03-15T10:30:45.123456+00:00"
  }
]
```

## 錯誤處理

- **網路連接失敗**：顯示具體錯誤訊息
- **使用者中斷**：支援 Ctrl+C 安全中斷測試
- **無效輸入**：提示使用者重新輸入正確選項
- **機房代碼錯誤**：驗證機房代碼有效性

## 依賴關係

此程式依賴於 `vultr_speedtest.py` 模組，需要確保該檔案在同一目錄中。

## 適用場景

- **互動式測試**：適合不熟悉命令列的使用者
- **探索性測試**：方便地嘗試不同機房和設定
- **教學演示**：清晰的介面適合教學使用
- **定期監控**：可用於定期檢查網路性能
- **機房選擇**：幫助選擇最適合的 VPS 機房位置

## 注意事項

1. **測試時間**：完整測試所有機房可能需要很長時間
2. **網路流量**：大檔案測試會消耗較多網路流量
3. **測試間隔**：建議設定適當的測試間隔避免過度請求
4. **結果保存**：重要的測試結果建議保存為 JSON 檔案